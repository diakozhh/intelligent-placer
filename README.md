# Intelligent-placer

## Постановка задачи

### Вход

На вход поступает изображение в формате .jpg, на котором изображена поверхность, на которой располагаются предметы и лист с многоугольником. Многоугольник изображен на белом листе формата A4 черными линиями. Лист с многоугольником должен находиться в левой части изображения относительно предметов; предметы располагаются на правой части изображения (т.е. изображение разделяется вертикальной линией наполовину) и должны быть хорошо различимы от поверхности.

### Выход

После выполнения программы в консоль выводится: **True**, в случае если предметы могут поместиться в многоугольнике; **False**, в обратном случае или же если изображение не удовлетворяет поставленным требованиям.

## Требования

### Общие требования к изображениям

+ Все изображения в .jpg формате.
+ Фотографии сделаны сверху, перпендикулярно плоскости объекта. Отклонение прямой зрения объектива от перпендикуляра к горизонтальной плоскости не превышает 15 градусов.
+ Все фотографии сделаны при одинаковом освещении и имеют четкую границу, допускается использование вспышки.
+ Фотографии должны быть горизонтальными.
+ Если изображение не получается корректно разделить на две половины, где в левой лист с многоугольником, а в правой предметы на поверхности; например, на листе присутсвуют предметы или же на стороне предметов пристутствует часть листа, то такое изображение считается некорректным.

### Общие требования к предметам

+ Предметы не должны перекрывать друг друга.
+ Предметы не должны иметь общих границ.
+ У предметов на фоне должны отсутствовать пересвеченные и серо-черные области.
+ Предмет может присутствовать на изображении лишь единожды.
+ Предметы находятся в правой части изображения.

### Общие требования к поверхности

+ Ровная светлая горизонтальная поверхность, на которой возможна слабо выделяющаяся текстура.

### Общие требования к многоугольнику

+ Многоугольник должен быть выпуклым и иметь не более шести вершин.
+ Многоульник должен находиться в левой части изображения.

## Данные

Изображения [объектов](objects).

Примеры [входных данных](tests).

## План решения

### Поиск на входном изображении предметов и многоугольника

+ С помощью методов глобальной и локальной бинаризации обработанных сглаживающими фильтрами и морфологическими операциями (закрытия) можно выделить границы предметов и многоугольника. В силу того, что предметы отделены как друг от друга так и от многоугольника, изображение можно разбить на компоненты связности, с которыми уже можно работать отдельно.

+ Для поиска среди компонент связности, соответствующую многоугольнику использует тот факт, что он изображен на белом листе бумаги формата A4

### Предварительная проверка

+ Проверка многоугольника на выпуклость: вершины можно найти как особые точки, и по вершинам построить выпуклую оболочку для проверки исходного многоугольника на выпуклость. Можно посчитать площади, если площадь выпуклой оболочки намного больше многоугольника, то многоугольник не выпуклый.

+ Проверка на принадлежность объектов заранее известному множеству объектов: можно сравнить особые точки объектов на изображении и объектов из заранее известного набора. Если объект на изображении имеет недостаточно совпадений в особых точках с каким-либо объектом, в таком случае объект считается неизвестным, алгоритм прекращает работу и выводит **False**. Порог совпадения по особым точкам задан заранее.

+ Проверка единственности объекта на изображении: это можно сделать также с помощью особых точек.

### Размещение предметов в многоугольнике

+ Сравнение суммы площадей объектов с площадью многоугольника. В случае если сумма площадей объектов больше площади многоугольника алгоритм завершает работу и выводит **False**.

+ Начиная с объекта с наибольшей площадью и некоторой вершины (пусть левая верхняя) многоугольника проверим, поместится ли объект в многоугольник путем наложения объекта на многоугольник (выбранная вершина и левая верхняя точка объекта совпадают). Если объект поместился в многоугольник пробуем уместить следующий объект; в случае неудачи вращаем предмет на некоторый заданный угол, пока объект не поместится и только тогда переходим к следующему объекту.
+ Можно с некоторым шагом раздробить многоугольник и перемещать объект в свободный узел сетки, и попытаться снова вращать объект. Если при некотором перемещении в некоторый узел и некотором вращении объект помещается, то можно перейти к следующему объекту. Узлы сетки, попавшие в уместившийся объект далее в рассмотрении не учавствуют.
+ В случае, если перебрали все узлы, а объект так и не удалось уместить в многоугольник, алгоритм завершает работу и возвращает **False**.
